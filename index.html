<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Missio Dei App</title> 
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Configura√ß√£o de Fontes -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  
  <!-- Import Map para React e Lucide -->
  <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.300.0"
      }
    }
  </script>
  
  <!-- Babel para compilar JSX no navegador -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    body { font-family: 'Inter', sans-serif; background-color: #F4F7FA; }
    /* Anima√ß√µes simples */
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideIn { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    @keyframes zoomIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    
    .animate-in { animation: fadeIn 0.5s ease-out forwards; }
    .slide-in-from-right { animation: slideIn 0.4s ease-out forwards; }
    .zoom-in { animation: zoomIn 0.3s ease-out forwards; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel" data-type="module">
    import React, { useState, useEffect } from 'react';
    import { createRoot } from 'react-dom/client';
    import { 
      Book, Globe, Users, Award, ChevronRight, CheckCircle, XCircle, 
      Menu, X, ArrowLeft, Share2, Search, Lock, Star, Calendar, 
      GraduationCap, PlayCircle, FileText, LogOut, Church, LayoutDashboard, 
      CreditCard, Check, Clock, Heart, Youtube, BookOpen, Smile, RefreshCw, ExternalLink, AlertTriangle 
    } from 'lucide-react';

    /**
     * üì± MISSIO DEI APP - VERS√ÉO HTML PORT√ÅTIL
     * Esta vers√£o roda diretamente no navegador sem build step.
     */

    // --- COMPONENTE DE LOGO OFICIAL ---
    const BrandLogo = ({ size = "large", className = "" }) => {
      const isLarge = size === "large";
      const dimension = isLarge ? 160 : 40; 
      
      return (
        <div className={`relative flex flex-col items-center justify-center ${className}`}>
          <svg width={dimension} height={dimension} viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            {/* Globo Azul Fundo */}
            <circle cx="50" cy="45" r="35" fill="#003366" stroke="#DAA520" strokeWidth="1"/>
            
            {/* Linhas do Globo */}
            <path d="M50 10 C65 20 75 30 50 80" stroke="#FFD700" strokeWidth="0.5" fill="none" opacity="0.8"/>
            <path d="M50 10 C35 20 25 30 50 80" stroke="#FFD700" strokeWidth="0.5" fill="none" opacity="0.8"/>
            <path d="M15 45 Q50 65 85 45" stroke="#FFD700" strokeWidth="0.5" fill="none" opacity="0.8"/>
            <path d="M20 30 Q50 50 80 30" stroke="#FFD700" strokeWidth="0.5" fill="none" opacity="0.8"/>

            {/* Cruz Dourada S√≥lida (Corre√ß√£o Renderiza√ß√£o) */}
            <path d="M45 5 L55 5 L55 85 L45 85 Z" fill="#DAA520" stroke="#FFF" strokeWidth="0.5"/>
            <path d="M15 35 L85 35 L85 45 L15 45 Z" fill="#DAA520" stroke="#FFF" strokeWidth="0.5"/>
            <circle cx="50" cy="40" r="4" fill="#FFF" opacity="0.6"/>
          </svg>
          
          {isLarge && (
            <div className="text-center -mt-2">
              <h1 className="text-3xl font-bold text-[#003366] tracking-tight leading-none" style={{ fontFamily: 'Times New Roman, serif' }}>
                Missio Dei
              </h1>
              <div className="flex items-center justify-center gap-2 mt-1">
                <div className="h-[1px] w-8 bg-[#DAA520]"></div>
                <span className="italic text-2xl text-[#DAA520]" style={{ fontFamily: 'Times New Roman, serif' }}>App</span>
                <div className="h-[1px] w-8 bg-[#DAA520]"></div>
              </div>
            </div>
          )}
        </div>
      );
    };

    // --- ENUMS & CONSTANTES ---
    const NIVEIS_ESPIRITUAIS = [
      { nome: 'Iniciante', min: 0 },
      { nome: 'Intermedi√°rio', min: 500 },
      { nome: 'Avan√ßado', min: 1500 },
      { nome: 'Mestre', min: 3000 },
      { nome: 'Reformador', min: 5000 },
      { nome: 'Mission√°rio Global', min: 10000 }
    ];

    const PLANOS = {
      FREE: 'free',
      MEMBRO: 'membro',
      MISSIONARIO: 'missionario',
      IGREJA: 'igreja'
    };

    // CONFIGURA√á√ÉO DOS PLANOS (LINKS REAIS)
    const DETALHES_PLANOS = [
      {
        id: PLANOS.FREE,
        nome: "Free Trial",
        preco: "Gr√°tis",
        periodo: "7 dias",
        features: ["Acesso ao Quiz B√°sico", "1 Leitura Di√°ria", "Sem Acesso ao Semin√°rio"],
        destaque: false,
        checkoutUrl: null 
      },
      {
        id: PLANOS.MEMBRO,
        nome: "Membro",
        preco: "R$ 49,00",
        periodo: "/m√™s",
        features: ["Quiz Ilimitado", "Leituras Di√°rias", "Ranking Global", "Missio Kids (B√¥nus)"],
        destaque: false,
        checkoutUrl: "https://www.asaas.com/c/dqa0h1sok05x4hgm"
      },
      {
        id: PLANOS.MISSIONARIO,
        nome: "Mission√°rio",
        preco: "R$ 97,00",
        periodo: "/m√™s",
        features: ["Acesso TOTAL", "Semin√°rio Completo", "Biblioteca de E-books", "Certificados Oficiais"],
        destaque: true,
        checkoutUrl: "https://www.asaas.com/c/jcluyg0y8tvzca1z"
      },
      {
        id: PLANOS.IGREJA,
        nome: "Igreja",
        preco: "R$ 497,00",
        periodo: "/m√™s",
        features: ["At√© 100 membros", "Painel de Lideran√ßa", "Gest√£o de Alunos", "R$ 15,00 por membro extra"],
        destaque: false,
        tipo: 'church',
        checkoutUrl: "https://www.asaas.com/c/1tiqgg1af71ef6zp"
      }
    ];

    // --- BANCO DE DADOS (MOCK) ---
    const videosKids = [
      { id: 1, titulo: "A Arca de No√©", youtubeId: "A_R14K7j7eY", duracao: "5 min", categoria: "Antigo Testamento" },
      { id: 2, titulo: "Davi e Golias", youtubeId: "N0sL8t_v7iQ", duracao: "8 min", categoria: "Her√≥is da F√©" },
      { id: 3, titulo: "O Nascimento de Jesus", youtubeId: "K1s3Gj5f7sA", duracao: "10 min", categoria: "Evangelhos" },
      { id: 4, titulo: "Jonas e a Baleia", youtubeId: "W9t5Zk6u9y8", duracao: "6 min", categoria: "Profetas" },
      { id: 5, titulo: "Daniel na Cova dos Le√µes", youtubeId: "P2r4Xm8n0q1", duracao: "7 min", categoria: "Her√≥is da F√©" },
    ];

    const ebooksLibrary = [
      { id: 1, titulo: "Introdu√ß√£o a Miss√µes", autor: "Dr. Paul B.", paginas: 45, tipo: "PDF" },
      { id: 2, titulo: "Biografias Mission√°rias", autor: "Missio Dei Ed.", paginas: 120, tipo: "E-PUB" },
      { id: 3, titulo: "Teologia para Crian√ßas", autor: "Sarah K.", paginas: 30, tipo: "PDF (Colorido)" },
      { id: 4, titulo: "O Evangelho em 7 Dias", autor: "Rev. John M.", paginas: 15, tipo: "PDF" },
    ];

    const bancoDePerguntas = [
      {
        id: 1,
        categoria: "B√≠blia AT",
        nivel: "Iniciante",
        pergunta: "Quem foi chamado para sair de sua terra em G√™nesis 12?",
        alternativas: ["Isaque", "Jac√≥", "Abra√£o", "Mois√©s"],
        correta: 2,
        explicacao: "Deus chamou Abra√£o para deixar sua parentela e ir para uma terra que Ele mostraria, iniciando a alian√ßa."
      },
      {
        id: 2,
        categoria: "Teologia Sistem√°tica",
        nivel: "Intermedi√°rio",
        pergunta: "O que significa 'Missio Dei'?",
        alternativas: ["Miss√£o da Igreja", "Miss√£o de Deus", "Miss√£o Apost√≥lica", "Miss√£o Pastoral"],
        correta: 1,
        explicacao: "Missio Dei √© um termo latino que significa 'Miss√£o de Deus', indicando que a miss√£o √© um atributo do pr√≥prio Deus e a igreja participa dela."
      },
      {
        id: 3,
        categoria: "Miss√µes",
        nivel: "Avan√ßado",
        pergunta: "Quem levou o evangelho √† China interior fundando a CIM?",
        alternativas: ["David Livingstone", "William Carey", "Hudson Taylor", "John Wesley"],
        correta: 2,
        explicacao: "Hudson Taylor fundou a China Inland Mission com foco em alcan√ßar o interior da China e contextualiza√ß√£o cultural."
      }
    ];

    const leituraDiaria = {
      dia: "12 Fev",
      titulo: "O Chamado Radical",
      texto: "A grande comiss√£o n√£o √© uma op√ß√£o para ser considerada, mas um mandamento para ser obedecido. Quando Cristo diz 'Ide', Ele n√£o estabelece condi√ß√µes.",
      referencia: "Mateus 28:19-20",
      aplicacao: "Hoje, ore por um pa√≠s onde o Evangelho √© proibido. Identifique um mission√°rio que sua igreja apoia e envie uma mensagem de encorajamento.",
      oracao: "Senhor, que minha vida seja um reflexo da Tua miss√£o. Usa-me onde estou."
    };

    const cursosSeminario = [
      { id: 1, titulo: "Fundamentos da F√©", aulas: 12, nivel: "B√°sico", img: "bg-[#003366]" },
      { id: 2, titulo: "Teologia Sistem√°tica I", aulas: 24, nivel: "Intermedi√°rio", img: "bg-[#DAA520]" },
      { id: 3, titulo: "Miss√µes Transculturais", aulas: 15, nivel: "Avan√ßado", img: "bg-emerald-600" },
      { id: 4, titulo: "Hermen√™utica B√≠blica", aulas: 20, nivel: "Mestre", img: "bg-purple-600" }
    ];

    // --- COMPONENTES UI ---
    const Card = ({ children, className = "", onClick }) => (
      <div onClick={onClick} className={`bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden ${onClick ? 'cursor-pointer hover:shadow-md transition-shadow' : ''} ${className}`}>
        {children}
      </div>
    );

    const Button = ({ children, onClick, variant = "primary", className = "", disabled = false, icon: Icon }) => {
      const base = "px-4 py-3 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 text-sm md:text-base";
      const styles = {
        primary: "bg-[#003366] text-white hover:bg-[#002244] disabled:bg-slate-300",
        secondary: "bg-[#DAA520] text-white hover:bg-[#B8860B] disabled:bg-[#FFE5B4]",
        outline: "border border-slate-200 text-slate-700 hover:border-[#003366] hover:text-[#003366]",
        ghost: "text-slate-600 hover:bg-slate-50",
        danger: "bg-red-50 text-red-600 hover:bg-red-100"
      };
      return (
        <button onClick={onClick} disabled={disabled} className={`${base} ${styles[variant]} ${className}`}>
          {Icon && <Icon size={18} />}
          {children}
        </button>
      );
    };

    const Badge = ({ children, color = "slate" }) => {
      const colors = {
        slate: "bg-slate-100 text-slate-700",
        amber: "bg-[#FFF8E1] text-[#B8860B]",
        green: "bg-green-100 text-green-800",
        blue: "bg-[#E6F0F9] text-[#003366]",
        pink: "bg-pink-100 text-pink-700"
      };
      return <span className={`px-2 py-1 rounded text-xs font-bold uppercase tracking-wide ${colors[color]}`}>{children}</span>;
    };

    // --- TELAS ---

    const GameMode = ({ onFinish, onBack }) => {
      const [qIdx, setQIdx] = useState(0);
      const [score, setScore] = useState(0);
      const [selected, setSelected] = useState(null);
      const [isAnswered, setIsAnswered] = useState(false);

      const question = bancoDePerguntas[qIdx];
      const isLast = qIdx === bancoDePerguntas.length - 1;

      const handleAnswer = (idx) => {
        if (isAnswered) return;
        setSelected(idx);
        setIsAnswered(true);
        if (idx === question.correta) setScore(s => s + 10);
      };

      const handleNext = () => {
        if (isLast) onFinish(score);
        else {
          setQIdx(qIdx + 1);
          setSelected(null);
          setIsAnswered(false);
        }
      };

      return (
        <div className="max-w-md mx-auto p-4 pb-24 animate-in slide-in-from-right">
          <div className="flex items-center justify-between mb-6">
             <Button variant="ghost" onClick={onBack} className="p-2"><ArrowLeft size={20}/></Button>
             <h2 className="text-[#003366] font-bold">Desafio B√≠blico</h2>
             <div className="w-8"></div>
          </div>

          <div className="flex justify-between items-center mb-6">
            <Badge color="amber">{question.categoria}</Badge>
            <div className="flex items-center gap-1">
               <Star size={16} className="text-[#DAA520] fill-current" />
               <span className="font-mono font-bold text-[#003366]">{score} pts</span>
            </div>
          </div>

          <div className="mb-8">
            <h2 className="text-xl font-serif font-bold text-slate-900 leading-snug mb-2">{question.pergunta}</h2>
            <span className="text-xs font-bold text-slate-400 uppercase tracking-widest">N√≠vel: {question.nivel}</span>
          </div>

          <div className="space-y-3">
            {question.alternativas.map((alt, idx) => {
              let style = "bg-white border-2 border-slate-200 text-slate-700 hover:bg-slate-50";
              if (isAnswered) {
                if (idx === question.correta) style = "bg-green-50 border-green-500 text-green-800";
                else if (idx === selected) style = "bg-red-50 border-red-500 text-red-800";
                else style = "bg-slate-50 border-slate-100 text-slate-400 opacity-50";
              }
              
              return (
                <button
                  key={idx}
                  disabled={isAnswered}
                  onClick={() => handleAnswer(idx)}
                  className={`w-full p-4 rounded-xl font-medium text-left transition-all ${style}`}
                >
                  <span className="font-bold mr-2 text-[#003366]">{['A)', 'B)', 'C)', 'D)'][idx]}</span> {alt}
                </button>
              );
            })}
          </div>

          {isAnswered && (
            <div className="mt-6 animate-in fade-in slide-in-from-bottom-2">
              <div className="bg-[#E6F0F9] p-4 rounded-lg text-sm text-[#003366] mb-4 border border-blue-200">
                <strong>Explica√ß√£o:</strong> {question.explicacao}
              </div>
              <Button onClick={handleNext} className="w-full shadow-lg">
                {isLast ? "Finalizar Quiz" : "Pr√≥xima Pergunta"} <ChevronRight size={18} />
              </Button>
            </div>
          )}
        </div>
      );
    };

    const KidsArea = ({ onBack }) => {
      const [activeVideo, setActiveVideo] = useState(null);
      return (
        <div className="max-w-4xl mx-auto p-4 pb-20 animate-in fade-in">
          <div className="flex items-center gap-2 mb-6">
            <Button variant="ghost" onClick={onBack} className="p-2"><ArrowLeft size={20}/></Button>
            <div>
              <h2 className="text-2xl font-bold text-pink-600 flex items-center gap-2">
                <Smile className="text-pink-500" /> Missio Kids
              </h2>
              <p className="text-slate-500 text-sm">30 Hist√≥rias Pedag√≥gicas</p>
            </div>
          </div>
          {activeVideo ? (
            <div className="animate-in zoom-in duration-300">
               <div className="aspect-video w-full bg-black rounded-xl overflow-hidden shadow-xl mb-4">
                 <iframe width="100%" height="100%" src={`https://www.youtube.com/embed/${activeVideo.youtubeId}?autoplay=1`} title="YouTube" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen></iframe>
               </div>
               <h3 className="text-xl font-bold text-slate-800 mb-2">{activeVideo.titulo}</h3>
               <Button variant="outline" onClick={() => setActiveVideo(null)}>Fechar V√≠deo</Button>
            </div>
          ) : (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              {videosKids.map(video => (
                <Card key={video.id} onClick={() => setActiveVideo(video)} className="group hover:ring-2 hover:ring-pink-300 transition-all">
                  <div className="aspect-video bg-slate-200 relative">
                    <div className="absolute inset-0 flex items-center justify-center bg-pink-50 group-hover:bg-pink-100 transition-colors">
                      <PlayCircle size={48} className="text-pink-500 opacity-80 group-hover:scale-110 transition-transform" />
                    </div>
                    <div className="absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded">
                      {video.duracao}
                    </div>
                  </div>
                  <div className="p-4">
                    <Badge color="pink">{video.categoria}</Badge>
                    <h4 className="font-bold text-slate-700 mt-2 group-hover:text-pink-600">{video.titulo}</h4>
                  </div>
                </Card>
              ))}
            </div>
          )}
        </div>
      );
    };

    const LibraryArea = ({ onBack, user }) => {
      const hasAccess = user.plan === PLANOS.MISSIONARIO || user.plan === PLANOS.IGREJA;
      return (
        <div className="max-w-4xl mx-auto p-4 pb-20 animate-in fade-in">
           <div className="flex items-center gap-2 mb-6">
            <Button variant="ghost" onClick={onBack} className="p-2"><ArrowLeft size={20}/></Button>
            <div>
              <h2 className="text-2xl font-bold text-[#003366] flex items-center gap-2">
                <BookOpen className="text-[#DAA520]" /> Biblioteca Digital
              </h2>
              <p className="text-slate-500 text-sm">E-books e Materiais de Apoio</p>
            </div>
          </div>
          <div className="grid gap-4">
            {ebooksLibrary.map(book => (
              <div key={book.id} className="bg-white p-4 rounded-xl border border-slate-100 flex items-center justify-between hover:shadow-md transition-shadow">
                 <div className="flex items-center gap-4">
                   <div className="w-12 h-16 bg-slate-200 rounded flex items-center justify-center shadow-inner">
                     <Book size={20} className="text-slate-400" />
                   </div>
                   <div>
                     <h4 className="font-bold text-slate-800">{book.titulo}</h4>
                     <p className="text-sm text-slate-500">{book.autor} ‚Ä¢ {book.paginas} p√°g</p>
                     <Badge color="blue">{book.tipo}</Badge>
                   </div>
                 </div>
                 {hasAccess ? (
                   <Button variant="outline" className="text-xs">Baixar</Button>
                 ) : (
                   <Lock className="text-slate-300" />
                 )}
              </div>
            ))}
          </div>
          {!hasAccess && (
             <div className="mt-8 bg-slate-100 p-6 rounded-xl text-center">
                <p className="text-slate-600 mb-2">A biblioteca completa est√° dispon√≠vel no plano <strong>Mission√°rio</strong>.</p>
                <p className="text-xs text-slate-400">Desbloqueie +500 t√≠tulos teol√≥gicos.</p>
             </div>
          )}
        </div>
      );
    };

    const TrialExpiredScreen = ({ onGoToPlans }) => (
      <div className="min-h-screen bg-[#003366] flex items-center justify-center p-4">
        <div className="bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-500">
          <div className="bg-[#FFF8E1] p-8 text-center border-b border-[#DAA520]">
            <div className="inline-flex bg-[#DAA520] text-white p-4 rounded-full mb-4 shadow-lg">
              <Clock size={48} />
            </div>
            <h2 className="text-2xl font-serif font-bold text-[#003366] mb-2">Seus 7 Dias Gratuitos Terminaram</h2>
            <p className="text-[#B8860B] font-medium">Mas sua jornada mission√°ria n√£o precisa parar aqui.</p>
          </div>
          <div className="p-8">
            <p className="text-slate-600 mb-6 leading-relaxed text-center">
              Voc√™ experimentou o in√≠cio, mas h√° um oceano de profundidade b√≠blica esperando por voc√™.
            </p>
            <Button variant="secondary" className="w-full text-lg py-4 shadow-xl mb-3" onClick={onGoToPlans}>
              Escolher meu Plano de Impacto
            </Button>
            <p className="text-xs text-center text-slate-400 mt-4">A partir de apenas R$ 49,00/m√™s.</p>
          </div>
        </div>
      </div>
    );

    const SubscriptionScreen = ({ onSelectPlan, onBack, showBackButton = true }) => {
      const handlePlanClick = (plano) => {
        if (plano.checkoutUrl) {
          window.open(plano.checkoutUrl, '_blank');
        } else {
          onSelectPlan(plano.id);
        }
      };

      return (
        <div className="max-w-4xl mx-auto p-4 pb-20 animate-in fade-in slide-in-from-bottom-4">
          <div className="text-center mb-8 pt-4">
            <h2 className="text-2xl font-serif font-bold text-[#003366]">Escolha seu Chamado</h2>
            <p className="text-slate-500">Invista na sua forma√ß√£o e apoie miss√µes globais.</p>
          </div>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            {DETALHES_PLANOS.map((plano) => (
              <div key={plano.id} className={`relative rounded-xl border-2 p-6 flex flex-col ${plano.destaque ? 'border-[#DAA520] bg-[#FFFCF5] shadow-lg scale-105 z-10' : 'border-slate-100 bg-white hover:border-slate-300'}`}>
                {plano.destaque && (
                  <div className="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-[#DAA520] text-white px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide">
                    Mais Popular
                  </div>
                )}
                <div className="mb-4">
                  <h3 className={`font-bold text-lg ${plano.destaque ? 'text-[#B8860B]' : 'text-slate-700'}`}>{plano.nome}</h3>
                  <div className="flex items-baseline mt-2">
                    <span className="text-2xl font-bold text-slate-900">{plano.preco}</span>
                    <span className="text-sm text-slate-500 ml-1">{plano.periodo}</span>
                  </div>
                </div>
                <ul className="space-y-3 mb-8 flex-1">
                  {plano.features.map((feat, idx) => (
                    <li key={idx} className="text-sm text-slate-600 flex items-start gap-2">
                      <Check size={16} className="text-green-500 mt-0.5 shrink-0" />
                      <span className="leading-tight">{feat}</span>
                    </li>
                  ))}
                </ul>
                <Button 
                  variant={plano.destaque ? 'secondary' : 'outline'} 
                  className="w-full" 
                  onClick={() => handlePlanClick(plano)}
                  icon={plano.checkoutUrl ? ExternalLink : undefined}
                >
                  {plano.id === PLANOS.FREE ? 'Continuar (Trial)' : 'Assinar Agora'}
                </Button>
              </div>
            ))}
          </div>
          {showBackButton && (
            <div className="mt-8 text-center"><Button variant="ghost" onClick={onBack}>Voltar ao In√≠cio</Button></div>
          )}
        </div>
      );
    };

    const LoginScreen = ({ onLogin }) => {
      const [email, setEmail] = useState('');
      return (
        <div className="min-h-screen flex items-center justify-center bg-[#F4F7FA] p-4">
          <Card className="w-full max-w-md p-8 border-t-4 border-t-[#DAA520]">
            <div className="mb-10 animate-in fade-in zoom-in duration-500">
              <BrandLogo size="large" />
              <p className="text-center text-slate-500 font-medium mt-4">Plataforma de Forma√ß√£o Mission√°ria</p>
            </div>
            
            {/* √ÅREA DE TESTE R√ÅPIDO */}
            <div className="mb-8 p-3 bg-slate-50 rounded-lg border border-slate-200">
              <p className="text-[10px] text-slate-400 font-bold uppercase text-center mb-2">Simula√ß√£o de Perfis (Dev)</p>
              <div className="grid grid-cols-2 gap-2 mb-2">
                 <Button variant="outline" className="text-xs py-1" onClick={() => onLogin({ name: 'Novo Usu√°rio', type: 'individual', plan: PLANOS.FREE, daysActive: 1 })}>Trial (Dia 1)</Button>
                 <Button variant="danger" className="text-xs py-1" icon={Lock} onClick={() => onLogin({ name: 'Usu√°rio Expirado', type: 'individual', plan: PLANOS.FREE, daysActive: 8 })}>Trial Expirado</Button>
              </div>
              <Button variant="primary" className="w-full text-xs py-1" icon={Church} onClick={() => onLogin({ name: 'Pastor Jo√£o', type: 'church', plan: PLANOS.IGREJA, daysActive: 100 })}>Plano Igreja</Button>
            </div>

            <div className="space-y-4">
              <input type="email" value={email} onChange={(e) => setEmail(e.target.value)} placeholder="seu@email.com" className="w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-[#DAA520] outline-none" />
              <Button onClick={() => onLogin({ name: email.split('@')[0] || 'Visitante', type: 'individual', plan: PLANOS.FREE, daysActive: 0 })} className="w-full shadow-lg shadow-blue-900/10">
                Come√ßar Gratuitamente
              </Button>
            </div>
          </Card>
        </div>
      );
    };

    const DailyReading = ({ onBack }) => (
      <div className="max-w-md mx-auto pt-2 animate-in zoom-in-95">
        <div className="flex items-center gap-2 mb-4">
            <Button variant="ghost" onClick={onBack} className="p-2"><ArrowLeft size={20}/></Button>
            <h2 className="text-[#003366] font-bold">Leitura Di√°ria</h2>
        </div>
        <div className="text-center mb-6"><span className="text-xs font-bold text-[#DAA520] uppercase tracking-widest">{leituraDiaria.dia}</span><h2 className="text-2xl font-serif font-bold text-[#003366] mt-1">{leituraDiaria.titulo}</h2><Badge color="slate">{leituraDiaria.referencia}</Badge></div>
        <div className="prose prose-slate prose-p:text-slate-600 prose-p:leading-relaxed mb-8"><p>{leituraDiaria.texto}</p></div>
        <div className="bg-[#FFF8E1] border border-[#DAA520] p-5 rounded-xl mb-6 shadow-sm"><h3 className="font-bold text-[#B8860B] mb-2 flex items-center gap-2"><Globe size={18} /> Aplica√ß√£o Mission√°ria</h3><p className="text-sm text-[#B8860B] italic">{leituraDiaria.aplicacao}</p></div>
        <div className="bg-slate-100 p-5 rounded-xl text-center"><h3 className="text-xs font-bold text-slate-500 uppercase mb-2">Ora√ß√£o Final</h3><p className="text-slate-700 font-medium font-serif italic">"{leituraDiaria.oracao}"</p></div>
      </div>
    );

    const Seminar = ({ user, setView, onBack }) => {
      const hasAccess = user.plan === PLANOS.MISSIONARIO || user.plan === PLANOS.IGREJA;
      return (
        <div className="max-w-md mx-auto pt-2">
          <div className="flex items-center gap-2 mb-4">
            <Button variant="ghost" onClick={onBack} className="p-2"><ArrowLeft size={20}/></Button>
            <h2 className="text-[#003366] font-bold">Semin√°rio</h2>
          </div>
          <div className="mb-6 flex justify-between items-center"><h2 className="text-xl font-bold text-[#003366]">Cursos Dispon√≠veis</h2>{!hasAccess && <Badge color="amber">Bloqueado</Badge>}</div>
          <div className="grid gap-4">{cursosSeminario.map(curso => (<div key={curso.id} className={`bg-white rounded-xl shadow-sm border ${hasAccess ? 'border-slate-100' : 'border-slate-200 opacity-80'} overflow-hidden flex relative`}>{!hasAccess && (<div className="absolute inset-0 bg-slate-50/50 backdrop-blur-[1px] z-10 flex items-center justify-center"><Lock className="text-slate-400" /></div>)}<div className={`w-24 ${curso.img} flex items-center justify-center text-white`}><Book /></div><div className="p-4 flex-1"><h3 className="font-bold text-slate-900">{curso.titulo}</h3><div className="text-xs text-slate-500 mt-1 flex gap-2"><span>{curso.aulas} Aulas</span> ‚Ä¢ <span>{curso.nivel}</span></div>{hasAccess && (<div className="w-full bg-slate-100 h-1.5 rounded-full mt-3"><div className="bg-green-500 h-1.5 rounded-full w-1/4"></div></div>)}</div></div>))}</div>
          {!hasAccess && (<div className="mt-8 bg-[#003366] rounded-xl p-6 text-center text-white shadow-xl"><Star className="mx-auto text-[#DAA520] mb-2" size={32} /><h3 className="font-bold text-lg">Acesso Restrito</h3><p className="text-blue-200 text-sm mb-4">O plano <strong>{DETALHES_PLANOS.find(p => p.id === user.plan)?.nome}</strong> n√£o inclui o Semin√°rio. Fa√ßa o upgrade para <strong>Mission√°rio</strong>.</p><Button variant="secondary" className="w-full text-[#003366] font-bold" onClick={() => setView('subscription')}>Ver Planos de Acesso</Button></div>)}
        </div>
      );
    };

    const ChurchPanel = ({ onBack }) => {
      const currentMembers = 92; 
      const maxMembers = 100;
      const extraCostPerMember = 15;
      const isLimitNear = currentMembers >= maxMembers * 0.9;
      const isLimitReached = currentMembers >= maxMembers;
      const extraMembers = Math.max(0, currentMembers - maxMembers);
      const extraBill = extraMembers * extraCostPerMember;
      const percentage = Math.min(100, (currentMembers / maxMembers) * 100);

      return (
        <div className="max-w-2xl mx-auto pt-2 animate-in fade-in">
          <div className="flex items-center gap-2 mb-4">
              <Button variant="ghost" onClick={onBack} className="p-2"><ArrowLeft size={20}/></Button>
              <h2 className="text-[#003366] font-bold">Painel da Igreja</h2>
          </div>
          
          <div className={`border rounded-xl p-6 mb-6 ${isLimitReached ? 'bg-red-50 border-red-200' : 'bg-white border-slate-200 shadow-sm'}`}>
             <div className="flex justify-between items-start mb-4">
                <div>
                   <h3 className="font-bold text-slate-800 text-lg">Capacidade do Plano</h3>
                   <p className="text-sm text-slate-500">Plano Igreja (R$ 497,00/m√™s)</p>
                </div>
                <div className={`px-3 py-1 rounded-full text-xs font-bold ${isLimitReached ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}`}>
                   {isLimitReached ? 'Limite Atingido' : 'Ativo'}
                </div>
             </div>
             <div className="w-full bg-slate-100 h-4 rounded-full overflow-hidden mb-2">
                <div className={`h-full transition-all duration-500 ${isLimitReached ? 'bg-red-500' : isLimitNear ? 'bg-amber-500' : 'bg-[#003366]'}`} style={{ width: `${percentage}%` }}></div>
             </div>
             <div className="flex justify-between text-sm font-medium mb-4">
                <span className={isLimitReached ? 'text-red-600' : 'text-slate-600'}>{currentMembers} Membros Cadastrados</span>
                <span className="text-slate-400">Limite: {maxMembers}</span>
             </div>
             {extraMembers > 0 && (
                <div className="bg-red-100 p-3 rounded-lg flex items-center gap-3 text-red-800 text-sm mb-4">
                   <AlertTriangle size={18} />
                   <span>Voc√™ tem <strong>{extraMembers} membros extras</strong>. Custo adicional: <strong>R$ {extraBill},00</strong> na pr√≥xima fatura.</span>
                </div>
             )}
             {isLimitReached ? (
                <Button variant="danger" className="w-full">Gerenciar Limite / Upgrade</Button>
             ) : (
                <p className="text-xs text-slate-400 text-center">Voc√™ pode adicionar mais {maxMembers - currentMembers} membros sem custo adicional.</p>
             )}
          </div>
          <div className="grid grid-cols-2 gap-4 mb-8">
            <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm"><div className="text-3xl font-bold text-slate-900">{currentMembers}</div><div className="text-sm text-slate-500">Membros Ativos</div></div>
            <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm"><div className="text-3xl font-bold text-[#DAA520]">850</div><div className="text-sm text-slate-500">Pontos da Igreja</div></div>
          </div>
          <h3 className="font-bold text-slate-800 mb-4">Ferramentas Pastorais</h3>
          <div className="space-y-3">
            <Button variant="outline" className="w-full justify-start" icon={Users}>Gerenciar Membros</Button>
            <Button variant="outline" className="w-full justify-start" icon={Award}>Criar Campeonato B√≠blico</Button>
            <Button variant="outline" className="w-full justify-start" icon={FileText}>Emitir Certificados</Button>
          </div>
        </div>
      );
    };

    const Dashboard = ({ user, setView, score }) => {
      const currentLevel = NIVEIS_ESPIRITUAIS.slice().reverse().find(n => score >= n.min) || NIVEIS_ESPIRITUAIS[0];
      const nextLevel = NIVEIS_ESPIRITUAIS.find(n => n.min > score);
      const progress = nextLevel ? ((score - currentLevel.min) / (nextLevel.min - currentLevel.min)) * 100 : 100;
      const planName = DETALHES_PLANOS.find(p => p.id === user.plan)?.nome || 'Free';
      const daysLeft = 7 - (user.daysActive || 0);

      return (
        <div className="p-4 max-w-lg mx-auto pb-24 space-y-6 animate-in fade-in">
          <div className="flex justify-between items-center">
            <div>
              <h2 className="text-lg font-bold text-[#003366]">Ol√°, {user.name}</h2>
              <div className="flex items-center gap-1 text-xs text-slate-500">
                <Badge color={user.plan === PLANOS.MISSIONARIO ? 'amber' : 'slate'}>{planName}</Badge>
                {user.type === 'church' && <Badge color="blue">L√≠der</Badge>}
              </div>
            </div>
            <div className="text-right">
              <div className="text-2xl font-bold text-[#003366]">{score}</div>
              <div className="text-xs text-slate-500 uppercase tracking-wide">Pontos</div>
            </div>
          </div>
          {user.plan === PLANOS.FREE && (
            <div className="bg-[#FFF8E1] border border-[#DAA520] rounded-lg p-3 flex justify-between items-center text-sm">
               <span className="text-[#B8860B] font-bold">Trial Gratuito</span>
               <span className="text-[#B8860B]">{daysLeft} dias restantes</span>
            </div>
          )}
          <div className="bg-[#003366] rounded-2xl p-6 text-white relative overflow-hidden shadow-xl shadow-blue-900/20">
            <div className="absolute -right-4 -top-4 opacity-10"><BrandLogo size="small" className="scale-[3] grayscale brightness-200" /></div>
            <div className="relative z-10">
              <p className="text-blue-200 text-xs font-bold uppercase mb-1">N√≠vel Espiritual</p>
              <h3 className="text-2xl font-serif font-bold text-[#DAA520] mb-4">{currentLevel.nome}</h3>
              <div className="w-full bg-white/10 h-2 rounded-full mb-2"><div className="bg-[#DAA520] h-2 rounded-full shadow-[0_0_10px_rgba(218,165,32,0.5)]" style={{ width: `${progress}%` }}></div></div>
              <p className="text-xs text-blue-200 text-right">Pr√≥ximo: {nextLevel ? nextLevel.nome : 'M√°ximo'}</p>
            </div>
          </div>
          <div className="grid grid-cols-2 gap-3">
            <Card onClick={() => setView('reading')} className="p-4 bg-[#E6F0F9] border-blue-100 hover:border-[#003366]">
              <Calendar className="text-[#003366] mb-2" />
              <h4 className="font-bold text-[#003366]">Leitura Di√°ria</h4>
              <p className="text-xs text-slate-500">Devocional de hoje</p>
            </Card>
            <Card onClick={() => setView('game')} className="p-4 bg-[#FFF8E1] border-amber-100 hover:border-[#DAA520]">
              <PlayCircle className="text-[#DAA520] mb-2" />
              <h4 className="font-bold text-[#B8860B]">Desafio B√≠blico</h4>
              <p className="text-xs text-slate-500">Quiz B√≠blico</p>
            </Card>
          </div>
          <div className="space-y-3">
            <h3 className="text-sm font-bold text-slate-500 uppercase tracking-widest mt-2">Materiais Extras</h3>
            <Card onClick={() => setView('kids')} className="p-4 border-pink-100 bg-pink-50 hover:border-pink-300 flex items-center justify-between group">
              <div className="flex items-center gap-3">
                <div className="bg-white p-2 rounded-full text-pink-500 shadow-sm"><Smile /></div>
                <div><h4 className="font-bold text-pink-700">Missio Kids</h4><p className="text-xs text-pink-600">30 Hist√≥rias Pedag√≥gicas</p></div>
              </div>
              <ChevronRight className="text-pink-300 group-hover:text-pink-500" />
            </Card>
            <Card onClick={() => setView('library')} className="p-4 border-slate-200 hover:border-[#003366] flex items-center justify-between group">
              <div className="flex items-center gap-3">
                <div className="bg-slate-100 p-2 rounded-full text-slate-600"><BookOpen /></div>
                <div><h4 className="font-bold text-slate-700">Biblioteca</h4><p className="text-xs text-slate-500">E-books e PDFs</p></div>
              </div>
              <ChevronRight className="text-slate-300 group-hover:text-[#003366]" />
            </Card>
          </div>
          <Card className="p-0 border-t-2 border-t-[#003366] mt-4">
            <div className="p-4 border-b border-slate-100 flex justify-between items-center">
              <h3 className="font-bold flex items-center gap-2 text-[#003366]"><GraduationCap size={20} /> Semin√°rio</h3>
              {user.plan !== PLANOS.MISSIONARIO && user.plan !== PLANOS.IGREJA && <Lock size={16} className="text-slate-400" />}
            </div>
            <div className="p-4">
              <p className="text-sm text-slate-600 mb-4">Aprofunde-se em Teologia e Miss√µes. Cursos com certificado.</p>
              <Button variant={user.plan === PLANOS.MISSIONARIO || user.plan === PLANOS.IGREJA ? 'primary' : 'outline'} className="w-full" onClick={() => setView('seminar')}>
                {user.plan === PLANOS.MISSIONARIO || user.plan === PLANOS.IGREJA ? 'Acessar Sala de Aula' : 'Ver Cursos'}
              </Button>
            </div>
          </Card>
          {user.plan !== PLANOS.IGREJA && user.plan !== PLANOS.MISSIONARIO && (
             <div className="text-center"><button onClick={() => setView('subscription')} className="text-sm font-bold text-[#DAA520] underline">Fazer Upgrade de Plano</button></div>
          )}
          {user.type === 'church' && (
            <Button variant="secondary" className="w-full" icon={Church} onClick={() => setView('church')}>Painel da Igreja</Button>
          )}
        </div>
      );
    };

    // --- APP CONTROLLER (MAIN) ---
    function App() {
      const [user, setUser] = useState(null); 
      const [view, setView] = useState('login'); 
      const [score, setScore] = useState(120); 

      const isTrialExpired = user?.plan === PLANOS.FREE && (user?.daysActive || 0) > 7;

      const handleLogin = (userData) => { setUser(userData); setView('dashboard'); };
      const handleQuizFinish = (points) => { setScore(score + points); setView('dashboard'); };
      const handleSelectPlan = (planId) => {
        if (planId === PLANOS.FREE) { setView('dashboard'); return; }
      };

      const renderView = () => {
        if (isTrialExpired && view !== 'subscription' && view !== 'login') {
          return <TrialExpiredScreen onGoToPlans={() => setView('subscription')} />;
        }

        switch(view) {
          case 'login': return <LoginScreen onLogin={handleLogin} />;
          case 'dashboard': return <Dashboard user={user} setView={setView} score={score} />;
          case 'game': return <GameMode onFinish={handleQuizFinish} onBack={() => setView('dashboard')} />;
          case 'reading': return <div className="p-4"><DailyReading onBack={() => setView('dashboard')} /></div>; 
          case 'seminar': return <div className="p-4"><Seminar user={user} setView={setView} onBack={() => setView('dashboard')} /></div>;
          case 'church': return <div className="p-4"><ChurchPanel onBack={() => setView('dashboard')} /></div>;
          case 'subscription': return <SubscriptionScreen onSelectPlan={handleSelectPlan} onBack={() => setView(user ? 'dashboard' : 'login')} showBackButton={!isTrialExpired} />;
          case 'kids': return <KidsArea onBack={() => setView('dashboard')} />;
          case 'library': return <LibraryArea onBack={() => setView('dashboard')} user={user} />;
          default: return <Dashboard user={user} setView={setView} score={score} />;
        }
      };

      return (
        <div className="min-h-screen bg-[#F4F7FA] font-sans text-slate-900 pb-16 md:pb-0">
          {user && view !== 'login' && !isTrialExpired && (
            <header className="bg-white border-b border-slate-200 sticky top-0 z-50 px-4 py-3 flex items-center justify-between shadow-sm">
              <div className="flex items-center gap-3 cursor-pointer" onClick={() => setView('dashboard')}>
                <BrandLogo size="small" className="scale-75" />
                <span className="font-serif font-bold text-[#003366] text-lg">Missio Dei</span>
              </div>
              {view !== 'dashboard' && <button onClick={() => setView('dashboard')} className="text-slate-500 hover:bg-slate-100 p-2 rounded-full"><X size={20} /></button>}
            </header>
          )}

          <main>{renderView()}</main>

          {user && view === 'dashboard' && !isTrialExpired && (
            <div className="fixed bottom-0 left-0 w-full bg-white border-t border-slate-200 flex justify-around p-3 pb-5 md:hidden text-xs font-medium text-slate-500 z-50">
              <div className="flex flex-col items-center gap-1 text-[#003366]" onClick={() => setView('dashboard')}><LayoutDashboard size={20} /> In√≠cio</div>
              <div className="flex flex-col items-center gap-1 hover:text-[#003366]" onClick={() => setView('seminar')}><GraduationCap size={20} /> Cursos</div>
              <div className="flex flex-col items-center gap-1 hover:text-[#003366]" onClick={() => setView('subscription')}><CreditCard size={20} /> Planos</div>
            </div>
          )}
        </div>
      );
    }

    const root = createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
